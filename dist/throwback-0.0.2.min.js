!function(){var a,b,c;for(b=0,c=["ms","moz","webkit","o"],b=0;4>b&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[c[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[b]+"CancelAnimationFrame"]||window[c[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(a=0,window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),window.requestTimeout=function(a,b,c){function d(){(new Date).getTime()-e>=b?a.call(a,c):f.value=requestAnimationFrame(d)}var e,f;return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame?(e=(new Date).getTime(),f={},f.value=requestAnimationFrame(d),f):window.setTimeout(a,b)},window.clearRequestTimeout=function(a){return window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):clearTimeout(a)},window.requestInterval=function(a,b,c){function d(){f.value=requestAnimationFrame(d),(new Date).getTime()-e>=b&&(a.call(a,c),e=(new Date).getTime())}var e,f;return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame?(e=(new Date).getTime(),f={},f.value=requestAnimationFrame(d),f):window.setInterval(a,b)},window.clearRequestInterval=function(a){return window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):clearInterval(a)}}(),function(a,b){"use strict";var c={};c.Util={uuid:function(){return(Math.PI*Math.max(.01,Math.random())).toString(36).substr(2)}};var d=c.Base=function(){};d.extend=function(a,b){var d,e,f,g;return e=this,d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return e.apply(this,arguments)},g=c.jQuery,g.extend(d,e,b),f=function(){this.constructor=d},f.prototype=e.prototype,d.prototype=new f,d.__super__=e.prototype,a&&g.extend(d.prototype,a),d},a&&(c.jQuery=a.noConflict()),c.Timer=d.extend();var e=function(a,b){var c,d,e,f,g,h=t.length;for(c=0;h>c;c++)e=t[c],e.dirty&&(e.dirty=!1,g=e.matrix,d="matrix3d("+g[0].join(",")+","+g[1].join(",")+","+g[2].join(",")+","+g[3].join(",")+")",f=e.el.style,f.webkitTransform=f.transform=d),e.animate&&e.animate(b)},f=function(){},g=function(){},h=(new Date).getTime(),i=0,j=60;c.Game=d.extend({constructor:function(a){var b=c.jQuery.extend({},a);this.stage=b.stage||new c.Stage},setup:function(a){f=a},start:function(){f(),k()},tick:function(a){g=a}});var k=function(){var a;for(a=(new Date).getTime(),i+=a-h,h=a;i>=j;)g(),i-=j;e(i/j,a),requestAnimationFrame(k)},l={children:!0},m={position:"absolute",top:0,left:0},n=c.Node=d.extend({addChild:function(a){var b;a.parent=this,this.children.push(a),b=this.stage,b&&b.attach(a)},constructor:function(){var a;this.el=a=document.createElement("div"),this.parent=null,this.children=[],this.matrix=o.slice(),this.position=o[3].slice(),this.dirty=!1,c.jQuery(a).css(m)},css:function(a,b){var d,e,f;if(b&&(b.children||b.onlyChildren))for(f=this.children,e=f.length,d=0;e>d;d++)f[d].css(a,l);b&&b.onlyChildren||c.jQuery(this.el).css(a)},move:function(a,b,c){var d,e,f,g;for(this.matrix=g=numeric.dotMMsmall(this.matrix,r(a,b,c)),d=this.children,f=d.length,e=0;f>e;e++)d[e].move(a,b,c);return this.dirty=!0,g},rotate:function(a){var b=this.matrix[3];return this.move(-b[0],-b[1],-b[2]),this.matrix=numeric.dotMMsmall(this.matrix,p(a)),this.move.apply(this,b)},scale:function(a){var b,c,d,e;for(this.matrix=e=numeric.dotMMsmall(this.matrix,q(a)),b=this.children,d=b.length,c=0;d>c;c++)b[c].scale(a);return this.dirty=!0,e}}),o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=function(a){var b=Math.cos,c=Math.sin;return[[b(a),c(-a),0,0],[c(a),b(a),0,0],o[2],o[3]]},q=function(a){return[[a,0,0,0],[0,a,0,0],[0,0,a,0],o[3]]},r=function(a,b,c){return c=c||0,[o[0],o[1],o[2],[a,b,c,1]]};c.Entity=n.extend({animate:function(a){var b=this.currentAnimation;b&&b.on&&b.update(a)&&(this.el.style.backgroundPosition=b.toString())},constructor:function(a){var b=c.jQuery.extend({},a),d=b.animations,e=b.sprite;n.call(this),this.sprite=e,e&&this.styleFromSprite(),this.animations=d||{},d&&(this.setDefaultAnimation(b.defaultAnimation),this.setAnimation())},setAnimation:function(a){var b,c=this.currentAnimation;c&&c.stop(),this.currentAnimation=c=this.animations[a||this.defaultAnimation],c&&(c.start(),b=c.sprite,this.css({width:b.get("frameWidth"),height:b.get("frameHeight"),backgroundImage:c.getBackgroundImage()}))},setDefaultAnimation:function(a){var b,c;b=this.animations,a?this.defaultAnimation=a:(c=b.defaultAnimation?"defaultAnimation":!1,this.defaultAnimation=c||Object.keys(b)[0])},styleFromSprite:function(a){var b=a||this.sprite;b&&this.css({height:b.get("frameHeight"),width:b.get("frameWidth"),backgroundImage:'url("'+b.image.src+'")'})}}),c.Group=n.extend(),c.Layer=n.extend(),c.Scene=n.extend();var s,t;t=[],c.Stage=n.extend({addChild:function(a){n.prototype.addChild.call(this,a),this.attach(a)},attach:function(a){var b,d;a.stage||(a.stage=d=this,c.jQuery(a.el).appendTo(this.el),b=a.children,b.length&&b.forEach(function(a){d.attach(a)}),t.push(a))},constructor:function(a){var b=c.jQuery.extend({},a);n.call(this),this.el=b.el||this.el,s.call(this,b.container)}}),s=function(a){c.jQuery(this.el).addClass("stage").appendTo(a||"body")},c.Animation=d.extend({constructor:function(a){var b=this;this.sprite=a,this.on=!1,this.frames=[],this.currentFrame=0,a.async.done(function(){b.sequence([0])})},getFrameCount:function(){return this.frames.length},getBackgroundImage:function(){return'url("'+this.sprite.image.src+'") '},sequence:function(a,b){if(!this.sprite.verifyFrames(a))throw new Error("frames out of bounds");this.frames=a,this.fps=b||15,this.frameTime=1e3/this.fps},start:function(){this.previousFrameTime=(new Date).getTime(),this.on=!0},step:function(){var a=this.currentFrame;this.currentFrame=a===this.frames.length-1?0:a+1},stop:function(){this.on=!1},toString:function(){for(var a,b=this.sprite.options,c=b.width,d=b.frameHeight,e=0,f=this.frames[this.currentFrame]*b.frameWidth;f>=c;)f-=c,e+=d;return a=-f,e=-e,a.toString()+"px "+e.toString()+"px"},update:function(a){for(var b=a-this.previousFrameTime,c=this.frameTime,d=!1;b>=c;)d=!0,this.step(),b-=c;return d&&(this.previousFrameTime=a),d}});var u,v,w,x;u={},c.Sprite=d.extend({constructor:function(a){this.options={},"string"==typeof a?this.setImage(a):this.config(a)},config:function(a){c.jQuery.extend(this.options,a),a.img&&this.setImage(a.img),x.call(this)},get:function(a){return this.options[a]},getFrameCount:function(){var a,b,c,d;return a=this.get("width")||0,b=this.get("height")||0,c=this.get("frameWidth"),d=this.get("frameHeight"),Math.floor(a/c)*Math.floor(b/d)},setImage:function(a){var b,d;b=u[a],d=this.async=new c.jQuery.Deferred,b?(this.image=b,d.resolve()):this.image=u[a]=v(a,d),w.call(this),d.fail(function(){throw new Error("Could not load image: "+a)})},verifyFrames:function(a){var b,c;return b=Math.min.apply(Math,a),c=Math.max.apply(Math,a),b>=0&&c<=Math.max(0,this.getFrameCount()-1)}}),x=function(){var a=this.options;["Height","Width"].forEach(function(c){var d="frame"+c;a[d]===b&&(a[d]=a[c.toLowerCase()]),a[d]=Math.max(a[d],1)})},w=function(){var a=this,b=this.image;this.async.done(function(){var d,e,f;d=c.jQuery(b),e=a.get("width")||d.width(),f=a.get("height")||d.height(),a.config({width:e,height:f,frameWidth:a.get("frameWidth")||e||1,frameHeight:a.get("frameHeight")||f||1})})},v=function(a,b){var c=new Image;return c.src=a,c.onLoad=c.onError=function(){b.reject()},c};var y=c.Audio=d.extend();c.Music=y.extend(),c.Sound=y.extend(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?exports=module.exports=c:this.Throwback=c}.call(this,this.jQuery);