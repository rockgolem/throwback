!function(){var a,b,c;for(b=0,c=["ms","moz","webkit","o"],b=0;4>b&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[c[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[b]+"CancelAnimationFrame"]||window[c[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(a=0,window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),window.requestTimeout=function(a,b,c){function d(){(new Date).getTime()-e>=b?a.call(a,c):f.value=requestAnimationFrame(d)}var e,f;return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame?(e=(new Date).getTime(),f={},f.value=requestAnimationFrame(d),f):window.setTimeout(a,b)},window.clearRequestTimeout=function(a){return window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):clearTimeout(a)},window.requestInterval=function(a,b,c){function d(){f.value=requestAnimationFrame(d),(new Date).getTime()-e>=b&&(a.call(a,c),e=(new Date).getTime())}var e,f;return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame?(e=(new Date).getTime(),f={},f.value=requestAnimationFrame(d),f):window.setInterval(a,b)},window.clearRequestInterval=function(a){return window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):clearInterval(a)}}(),function(a,b){"use strict";var c={};c.Util={uuid:function(){return(Math.PI*Math.max(.01,Math.random())).toString(36).substr(2)}};var d=c.Base=function(){};d.extend=function(a,b){var d,e,f,g;return e=this,d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return e.apply(this,arguments)},g=c.jQuery,g.extend(d,e,b),f=function(){this.constructor=d},f.prototype=e.prototype,d.prototype=new f,d.__super__=e.prototype,a&&g.extend(d.prototype,a),d},a&&(c.jQuery=a.noConflict()),c.Timer=d.extend();var e=function(a,b){var c,d,e,f,g,h=r.length;for(c=0;h>c;c++)e=r[c],g=e.matrix,d="matrix3d(",d+=[g[0].join(","),g[1].join(","),g[2].join(","),g[3].join(",")].join(","),d+=")",f=e.el.style,f["-webkit-transform"]=d,f.transform=d,e.animate&&e.animate(b)},f=function(){},g=function(){},h=(new Date).getTime(),i=0,j=60;c.Game=d.extend({constructor:function(a){var b=c.jQuery.extend({},a);this.stage=b.stage||new c.Stage},setup:function(a){f=a},start:function(){f(),k()},tick:function(a){g=a}});var k=function(){var a;for(a=(new Date).getTime(),i+=a-h,h=a;i>=j;)g(),i-=j;e(i/j,a),requestAnimationFrame(k)},l=c.Node=d.extend({addChild:function(a){var b;a.parent=this,this.children.push(a),b=this.stage,b&&b.attach(a)},constructor:function(){var a;this.el=a=document.createElement("div"),this.parent=null,this.children=[],this.matrix=m(),this.position=[0,0,0,1],this.dirty=!1,c.jQuery(a).css({position:"absolute",top:0,left:0})},css:function(a,b){var d,e,f,g=c.jQuery;if(b=g.extend({},{children:!1,onlyChildren:!1},b),b.children||b.onlyChildren)for(f=this.children,e=f.length,d=0;e>d;d++)f[d].css(a,{children:!0});b.onlyChildren||g(this.el).css(a)},move:function(a,b,c){var d,e,f,g;for(this.matrix=g=numeric.dot(this.matrix,p(a,b,c)),d=this.children,f=d.length,e=0;f>e;e++)d[e].move(a,b,c);return g},rotate:function(a){var b=this.matrix[3];return this.move(-b[0],-b[1],-b[2]),this.matrix=numeric.dot(this.matrix,n(a)),this.move.apply(this,b)},scale:function(a){var b,c,d,e;for(this.matrix=e=numeric.dot(this.matrix,o(a)),b=this.children,d=b.length,c=0;d>c;c++)b[c].scale(a);return e}}),m=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]},n=function(a){var b=Math.cos,c=Math.sin;return[[b(a),c(-a),0,0],[c(a),b(a),0,0],[0,0,1,0],[0,0,0,1]]},o=function(a){return[[a,0,0,0],[0,a,0,0],[0,0,a,0],[0,0,0,1]]},p=function(a,b,c){return c=c||0,[[1,0,0,0],[0,1,0,0],[0,0,1,0],[a,b,c,1]]};c.Entity=l.extend({animate:function(a){var b=this.currentAnimation;b&&b.on&&b.update(a)&&this.render()},constructor:function(a){var b=c.jQuery.extend({},a),d=b.animations,e=b.sprite;l.call(this),this.sprite=e,e&&this.styleFromSprite(),this.animations=d||{},d&&(this.setDefaultAnimation(b.defaultAnimation),this.setAnimation())},render:function(){this.css({backgroundPosition:this.currentAnimation.toString()})},setAnimation:function(a){var b,c=this.currentAnimation;c&&c.stop(),this.currentAnimation=c=this.animations[a||this.defaultAnimation],c&&(c.start(),b=c.sprite,this.css({width:b.get("frameWidth"),height:b.get("frameHeight"),backgroundImage:c.getBackgroundImage()}))},setDefaultAnimation:function(a){var b,c;b=this.animations,a?this.defaultAnimation=a:(c=b.defaultAnimation?"defaultAnimation":!1,this.defaultAnimation=c||Object.keys(b)[0])},styleFromSprite:function(a){var b=a||this.sprite;b&&this.css({height:b.get("frameHeight"),width:b.get("frameWidth"),backgroundImage:'url("'+b.image.src+'")'})}}),c.Group=l.extend(),c.Layer=l.extend(),c.Scene=l.extend();var q,r;r=[],c.Stage=l.extend({addChild:function(a){l.prototype.addChild.call(this,a),this.attach(a)},attach:function(a){var b,d;a.stage||(a.stage=d=this,c.jQuery(a.el).appendTo(this.el),b=a.children,b.length&&b.forEach(function(a){d.attach(a)}),r.push(a))},constructor:function(a){var b=c.jQuery.extend({},a);l.call(this),this.el=b.el||this.el,q.call(this,b.container)}}),q=function(a){c.jQuery(this.el).addClass("stage").appendTo(a||"body")},c.Animation=d.extend({constructor:function(a){var b=this;this.sprite=a,this.on=!1,this.frames=[],this.currentFrame=0,a.async.done(function(){b.sequence([0])})},getFrameCount:function(){return this.frames.length},getBackgroundImage:function(){return'url("'+this.sprite.image.src+'") '},sequence:function(a,b){if(!this.sprite.verifyFrames(a))throw new Error("frames out of bounds");this.frames=a,this.fps=b||15,this.frameTime=1e3/this.fps},start:function(){this.previousFrameTime=(new Date).getTime(),this.on=!0},step:function(){var a=this.currentFrame;this.currentFrame=a===this.frames.length-1?0:a+1},stop:function(){this.on=!1},toString:function(){for(var a=this.frames[this.currentFrame],b=this.sprite,c=b.options,d=c.width,e=c.frameWidth,f=c.frameHeight,g=0,h=0,i=a*e;i>=d;)i-=d,h+=f;return g=-i,h=-h,g.toString()+"px "+h.toString()+"px"},update:function(a){for(var b=a-this.previousFrameTime,c=this.frameTime,d=!1;b>=c;)d=!0,this.step(),b-=c;return d&&(this.previousFrameTime=a),d}});var s,t,u,v;s={},c.Sprite=d.extend({constructor:function(a){this.options={},"string"==typeof a?this.setImage(a):this.config(a)},config:function(a){c.jQuery.extend(this.options,a),a.img&&this.setImage(a.img),v.call(this)},get:function(a){return this.options[a]},getFrameCount:function(){var a,b,c,d;return a=this.get("width")||0,b=this.get("height")||0,c=this.get("frameWidth"),d=this.get("frameHeight"),Math.floor(a/c)*Math.floor(b/d)},setImage:function(a){var b,d;b=s[a],d=this.async=new c.jQuery.Deferred,b?(this.image=b,d.resolve()):this.image=s[a]=t(a,d),u.call(this),d.fail(function(){throw new Error("Could not load image: "+a)})},verifyFrames:function(a){var b,c;return b=Math.min.apply(Math,a),c=Math.max.apply(Math,a),b>=0&&c<=Math.max(0,this.getFrameCount()-1)}}),v=function(){var a=this.options;["Height","Width"].forEach(function(c){var d="frame"+c;a[d]===b&&(a[d]=a[c.toLowerCase()]),a[d]=Math.max(a[d],1)})},u=function(){var a=this,b=this.image;this.async.done(function(){var d,e,f;d=c.jQuery(b),e=a.get("width")||d.width(),f=a.get("height")||d.height(),a.config({width:e,height:f,frameWidth:a.get("frameWidth")||e||1,frameHeight:a.get("frameHeight")||f||1})})},t=function(a,b){var c=new Image;return c.src=a,c.onLoad=c.onError=function(){b.reject()},c};var w=c.Audio=d.extend();c.Music=w.extend(),c.Sound=w.extend(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?exports=module.exports=c:this.Throwback=c}.call(this,this.jQuery);